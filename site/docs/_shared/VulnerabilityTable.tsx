import React, { useState } from 'react';
import { PLUGINS, PLUGIN_CATEGORIES } from './data/plugins';

const VulnerabilityTable = () => {
  const [selectedCategory, setSelectedCategory] = useState<string>('all');

  // Filter out Custom Policy plugin and apply category filter
  const filteredPlugins = PLUGINS.filter((plugin) => {
    return (
      plugin.pluginId !== 'policy' &&
      (selectedCategory === 'all' || plugin.category === selectedCategory)
    );
  });

  return (
    <div>
      <div style={{ marginBottom: '1rem' }}>
        <label htmlFor="category-select" style={{ marginRight: '0.5rem' }}>
          Filter by category:
        </label>
        <select
          id="category-select"
          value={selectedCategory}
          onChange={(e) => setSelectedCategory(e.target.value)}
          style={{ padding: '0.5rem' }}
        >
          <option value="all">All Categories</option>
          {PLUGIN_CATEGORIES.map((category) => (
            <option key={category} value={category}>
              {category}
            </option>
          ))}
        </select>
      </div>

      <table>
        <thead>
          <tr>
            <th>Vulnerability</th>
            <th>RAG</th>
            <th>Agent</th>
            <th>Chatbot</th>
          </tr>
        </thead>
        <tbody>
          {filteredPlugins.map((plugin) => (
            <tr key={plugin.pluginId}>
              <td>{plugin.name}</td>
              <td>{plugin.applicationTypes.rag ? 'ðŸš¨' : 'âœ…'}</td>
              <td>{plugin.applicationTypes.agent ? 'ðŸš¨' : 'âœ…'}</td>
              <td>{plugin.applicationTypes.chat ? 'ðŸš¨' : 'âœ…'}</td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
};

export default VulnerabilityTable;
